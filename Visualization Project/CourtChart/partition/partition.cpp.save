#include <iostream>
#include <fstream>
#include <cstring>
using namespace std;
int main()
{
    ifstream inputData("0021500492.json");
    ofstream outputData;
    bool startTag = false;
    int sequence = 1, endEventTag = 0,i ,j;
    char tmp, filename[21] = "0021500492_1xxx.json", seq[4],*t,
    filenameAfter[21] = "0021500492_0xxx.json";
    while ((tmp = inputData.get()) != EOF && sequence <= 10){
        if (tmp == '[') {
            if (!startTag){startTag = true;}
        }
        if (startTag){
            if (tmp == '{'){
                if (!endEventTag){
                    filename[12] = '0' + sequence/100;
                    filename[13] = '0' + (sequence - 100 * (sequence/100)) /10;
                    filename[14] = '0' + sequence%10;
                    outputData.open(filename);
                    outputData.put(tmp);
                    endEventTag += 1;
                }
                else {
                    endEventTag += 1;
                    outputData.put(tmp);
                }
            }
            else if (tmp == '}'){
                endEventTag -= 1;
                outputData.put(tmp);
                if (!endEventTag) {outputData.close();sequence++;cout << sequence << endl;}
            }
            else {outputData.put(tmp);}
        }
    }
    inputData.close();
    for (i = 1; i < sequence; i++){
        filename[12] = '0' + i/100;
        filename[13] = '0' + (i - 100 * (i/100)) /10;
        filename[14] = '0' + i%10; 
        outputData.open(filename);
        for (j = 0; j < 12; j++){
            outputData.get();
        }
        t = seq;
        while ((tmp = outputData.get())!= '"'){
            *t = tmp;t++
        }
        *t = '\0';
        if  
    }

}
